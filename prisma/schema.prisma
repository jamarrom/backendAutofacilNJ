generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id        String   @id @default(cuid())
  email     String   @unique
  password  String
  name      String?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("users")
}

model Car {
  id          String   @id @default(cuid())
  title       String
  brand       CarBrand
  model       String
  year        Int
  price       Float
  type        CarType
  fuelType    FuelType
  transmission TransmissionType
  mileage     Int
  color       String
  seats       Int
  horsepower  Int?
  fuelEconomy String?
  category    CarCategory
  isFeatured  Boolean @default(false)
  description String?

  // Relaciones
  images      CarImage[]
  features    CarFeature[]

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("cars")
}

model CarImage {
  id           String    @id @default(cuid())
  mediaType    MediaType @default(IMAGE)
  url          String    // Para imagen o video
  thumbnailUrl String?   // Solo para video
  order        Int       @default(0)
  isPrimary    Boolean   @default(false)
  carId        String
  car          Car       @relation(fields: [carId], references: [id], onDelete: Cascade)

  @@map("car_images")
}

model CarFeature {
  id          String @id @default(cuid())
  name        String
  description String?
  carId       String
  car         Car    @relation(fields: [carId], references: [id], onDelete: Cascade)

  @@map("car_features")
}

model HomeSlider {
  id            String   @id @default(cuid())
  mediaType     MediaType  @default(IMAGE)
  imageUrl      String?
  videoUrl      String?
  thumbnailUrl  String?   // Requerido si mediaType es VIDEO
  title         String?
  subtitle      String?
  order         Int      @default(0)
  isActive      Boolean  @default(true)
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt

  @@map("home_sliders")
}

model AuctionSlider {
  id            String   @id @default(cuid())
  mediaType     MediaType  @default(IMAGE)
  imageUrl      String?
  videoUrl      String?
  thumbnailUrl  String?
  title         String?
  subtitle      String?
  order         Int      @default(0)
  isActive      Boolean  @default(true)
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt

  @@map("auction_sliders")
}

model SiteContent {
  id        String   @id @default(cuid())
  key       String   @unique // ej: "contact_info", "home_slider"
  value     Json     // guardamos todo como JSON flexible
  updatedAt DateTime @updatedAt
  updatedBy String?  // opcional: email del admin

  @@map("site_content")
}

enum CarType {
  SEDAN
  SUV
  COUPE
  HATCHBACK
  TRUCK
}

enum FuelType {
  GASOLINE
  DIESEL
  ELECTRIC
  HYBRID
}

enum TransmissionType {
  AUTOMATIC
  MANUAL
}

enum CarCategory {
  NEW
  AUCTION
}

enum CarBrand {
  BMW
  MERCEDES_BENZ
  PORSCHE
  TESLA
  AUDI
  LEXUS
  CADILLAC
  DODGE
  FORD
  JEEP
  VOLKSWAGEN
}

enum MediaType {
  IMAGE
  VIDEO
}